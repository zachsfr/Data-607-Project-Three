atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
####
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c("computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement","rrrr ","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr ","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
####
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c("computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr ","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
####
View(ds_skills_df)
rrrr == ds_skills_df$rrrr
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c("computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
rrrr == ds_skills_df$rrrr
resR <- gsub(l108, pattern = "[[:space:]][Rr][^[[:alnum:]]", replacement = " RrRr",)
resR
resR <- gsub(test_string, pattern = "[[:space:]][Rr][^[[:alnum:]]", replacement = " RrRr",)
resR
test_string <- "Some of the things I would like to learn are C#, C++, and maybe a little R, What I don't want to learn about are canteloupe and rarefaction."
resR <- gsub(test_string, pattern = "[[:space:]][Rr][^[[:alnum:]]", replacement = " RrRr",)
resR
rescsharp <- gsub(test_string, pattern = "[[:space:]][Cc]\\#", replacement = " chsarp")
rescsharp
rescsharp <- gsub(test_string, pattern = "[[:space:]][Cc]\\#", replacement = " csharp")
rescsharp
rescplusplus <- gsub(test_string, pattern = "[[:space:]][Cc]\\+\\+", replacement = " cplusplus")
rescplusplus
#210323 0911: Trying to resolve inability to detect C#, C++. Plan: detect C#, C++ before removing punctuation. Then detect R after removing punctuation.
#This script takes atlanta, a folder of txt job descriptions for data scientists. It generates ds_skills_df, a dataframe. ds_skills_df has 1 row for each job listing in atlanta, and one column for each term in ds_skills_list. The value in each cell is the number of appearances of the column name in the listing.
library(tidyverse)
library(tm)
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[[:space:]][Cc]\\#","computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c("chsarp","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
View(ds_skills_df)
#210323 0911: Trying to resolve inability to detect C#, C++. Plan: detect C#, C++ before removing punctuation. Then detect R after removing punctuation.
#This script takes atlanta, a folder of txt job descriptions for data scientists. It generates ds_skills_df, a dataframe. ds_skills_df has 1 row for each job listing in atlanta, and one column for each term in ds_skills_list. The value in each cell is the number of appearances of the column name in the listing.
library(tidyverse)
library(tm)
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[[:space:]][Cc]\\#","computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c(" chsarp","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[[:space:]][Cc]\\#","computer science","data engineering","deep learning","machine learning","neural networks","project management","[[:space:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c(" csharp","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
View(ds_skills_df)
rrrr <- ds_skills_df$rrrr
csharp <- ds_skills_df$csharp
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[^[[:alnum:]][Cc]\\#","computer science","data engineering","deep learning","machine learning","neural networks","project management","[^[[:alnum:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c(" csharp","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
csharp == ds_skills_df$csharp
rrrr == ds_skills_df$rrrr
rescplusplus <- gsub(test_string, pattern = "[^[[:alnum:]][Cc]\\+\\+", replacement = " cplusplus")
rescplusplus
test_string <- "Some of the things I would like to learn are C#, C++, and maybe a little R, What I don't want to learn about are canteloupe and rarefaction."
rescplusplus <- gsub(test_string, pattern = "[^[[:alnum:]][Cc]\\+\\+", replacement = " cplusplus")
rescplusplus
#210323 0911: Trying to resolve inability to detect C#, C++. Plan: detect C#, C++ before removing punctuation. Then detect R after removing punctuation.
#This script takes atlanta, a folder of txt job descriptions for data scientists. It generates ds_skills_df, a dataframe. ds_skills_df has 1 row for each job listing in atlanta, and one column for each term in ds_skills_list. The value in each cell is the number of appearances of the column name in the listing.
library(tidyverse)
library(tm)
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[^[[:alnum:]][Cc]\\#","[^[[:alnum:]][Cc]\\+\\+","computer science","data engineering","deep learning","machine learning","neural networks","project management","[^[[:alnum:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c(" csharp","cplusplus","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
View(ds_skills_df)
#210323 0911: Trying to resolve inability to detect C#, C++. Plan: detect C#, C++ before removing punctuation. Then detect R after removing punctuation.
#This script takes atlanta, a folder of txt job descriptions for data scientists. It generates ds_skills_df, a dataframe. ds_skills_df has 1 row for each job listing in atlanta, and one column for each term in ds_skills_list. The value in each cell is the number of appearances of the column name in the listing.
library(tidyverse)
library(tm)
atlanta <- "C:/Users/dmosc/OneDrive/Documents/academic/CUNY SPS/DATA 607/Proj3/zachsfr project three/Data-607-Project-Three/atlanta"
find <- c("[^[[:alnum:]][Cc]\\#","[^[[:alnum:]][Cc]\\+\\+","computer science","data engineering","deep learning","machine learning","neural networks","project management","[^[[:alnum:]][Rr][^[[:alnum:]]","scikit-learn","software development","software engineering")
repl <- c(" csharp"," cplusplus","computerscience","dataengineering","deeplearning","machinelearning","neuralnetworks","projectmanagement"," rrrr","scikitlearn","softwaredevelopment","softwareengineering")
ds_skills_list <- c("ai","analysis","aws","azure","c","caffe","cassandra","communication","computerscience","cplusplus","csharp","d3","dataengineering","deeplearning","docker","excel","git","hadoop","hbase","hive","java","javascript","keras","linux","machinelearning","mathematics","matlab","mongodb","mysql","neuralnetworks","nlp","nosql","numpy","pandas","perl","pig","projectmanagement","python","pytorch","rrrr","sas","scala","scikitlearn","softwaredevelopment","softwareengineering","spark","spss","sql","statistics","tableau","tensorflow","visualization")
#Create corpus from Atlanta files#
atlanta_corpus <- VCorpus(DirSource(atlanta, encoding = "UTF-8"), readerControl = list(language = "en"))
#transform corpus#
atlanta_corpus <- tm_map(atlanta_corpus, removeWords, stopwords("english"))
atlanta_corpus <- tm_map(atlanta_corpus, stripWhitespace)
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(tolower))
#atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) so I can detect C#, C++
for (i in seq(length(find))) {
atlanta_corpus <- tm_map(atlanta_corpus, content_transformer(function(atlanta_corpus) gsub(atlanta_corpus, pattern = find[i], replacement = repl[i])))
}
atlanta_corpus <- tm_map(atlanta_corpus, removePunctuation) ###########
#build document_term dataframe#
document_term <- DocumentTermMatrix(atlanta_corpus)
document_term <- document_term %>%
as.matrix() %>%
as.data.frame()
#Find members of ds_skills_list in colnames(document_term)#
##PROBLEM: R is not in colnames(document_term)
ds_skills_in_document_term <- cbind(ds_skills_list, ds_skills_list %in% colnames(document_term))
ds_skills_in_document_term <- as.data.frame(ds_skills_in_document_term)
ds_skills_in_document_term <- ds_skills_in_document_term %>%
filter(V2 == "TRUE")
#build ds_skills_df dataframe#
ds_skills_df <- document_term %>%
select(ds_skills_in_document_term$ds_skills_list)
#tidy ds_skills_df#
ds_skills_df <- rownames_to_column(ds_skills_df)
ds_skills_df <- rename(ds_skills_df, "listing" = "rowname")
ds_skills_df <- ds_skills_df %>%
mutate("listing" = substr(listing,0,nchar(listing)-4))
View(ds_skills_df)
library(tidyverse)
library(DBI)
library(RMariaDB)
con <- dbConnect(RMariaDB::MariaDB(),
database = "PROJ3",
user = 'daniel',
password = 'cuny607',
host = "72.80.137.125",port = 3306)
Listings <- dbGetQuery(con, 'SELECT * from PROJ3.Listings;')
ListingSkill <- dbGetQuery(con, 'SELECT * from PROJ3.ListingSkill;')
skills_and_salary <- Listings %>%
filter(minSal > 0)
View(skills_and_salary)
skill_counts <- ListingSkill %>%
count(skill) %>%
arrange(desc(n))
View(skill_counts)
View(ListingSkill)
posting_counts <- ListingSkill %>%
count(listing) %>%
arrange(desc(n))
View(posting_counts)
View(posting_counts)
View(skills_and_salary)
skills_and_salary <- Listings %>%
filter(minSal > 0) %>%
left_join(posting_counts, by = "listing")
skills_and_salary <- Listings %>%
rename("listing" = list_id) %>%
filter(minSal > 0) %>%
left_join(posting_counts, by = "listing")
View(skills_and_salary)
View(skill_counts)
View(posting_counts)
ggplot(data = skills_and_salary, mapping = aes(x = minSal, y = n)) +
geom_point()
View(Listings)
exp_and_salary <- Listings %>%
rename("listing" = list_id) %>%
filter(minYears > 0) %>%
left_join(posting_counts, by = "listing")
ggplot(data = exp_and_salary, mapping = aes(x = minSal, y = minYears)) +
geom_point()
ggplot(data = exp_and_salary, mapping = aes(y = minSal, x = minYears)) +
geom_point()
exp_and_salary <- Listings %>%
rename("listing" = list_id) %>%
filter(minYears > 0, minSal > 0) %>%
left_join(posting_counts, by = "listing")
ggplot(data = exp_and_salary, mapping = aes(y = minSal, x = minYears)) +
geom_point()
db <- "PROJ3"
us <- "daniel"
pw <- "cuny607"
ho <- "72.80.137.125"
pt <- 3306
con <- dbConnect(RMariaDB::MariaDB(),
database = db,
user = us,
password = pw,
host = ho,port = pt)
posting_counts <- ListingSkill %>%
count(listing) %>%
arrange(desc(n))
hist(posting_counts$n)
db <- "PROJ3"
us <- "daniel"
pw <- "cuny607"
ho <- "72.80.137.125"
pt <- 3306
library(tidyverse)
library(DBI)
library(RMariaDB)
library(ggthemes)
con <- dbConnect(RMariaDB::MariaDB(),
database = db,
user = us,
password = pw,
host = ho,port = pt)
ListingSkill <- dbGetQuery(con, 'SELECT * from PROJ3.ListingSkill;')
skills <- dbGetQuery(con, "SELECT * from PROJ3.Skills")
Listings <- dbGetQuery(con, 'SELECT * from PROJ3.Listings;')
skill_counts <- ListingSkill %>%
rename("code" = skill) %>%
left_join(skills, by = "code") %>%
count(meaning) %>%
arrange(desc(n))
top20_skill_counts <- skill_counts[1:20,]
top20_skill_counts$meaning[c(1,7,8,14)] = c("ML", "Comp Sci", "Visualization", "AWS")
ggplot(data = top20_skill_counts, mapping = aes(fct_rev(reorder(meaning, -n, sum)), n/192)) + #192 = total number of listings in our sample
geom_col(fill = "dark green", colour = "white") +
labs(x = "", y = "Fraction of Listings", title = "Some DS Skills are More Frequently Sought Than Others", subtitle = "Machine Learning, Python dominate") +
theme_economist() +
#theme(axis.text.x = element_text(angle = 90))
coord_flip()
posting_counts <- ListingSkill %>%
count(listing) %>%
arrange(desc(n))
ggplot(data = posting_counts, mapping = aes(x = n, y = ..count../sum(..count..))) +
geom_histogram(binwidth = 2, fill = "dark green", colour = "white") +
labs(x = "Number of Skills In Posting", y = "Fraction of Listings", title = "Employers Seek Out Versatile Candidates", subtitle ="And some seem to want it all") +
theme_economist()
skills_and_salary <- Listings %>%
rename("listing" = list_id) %>%
filter(minSal > 0) %>%
left_join(posting_counts, by = "listing") %>%
filter(n < 15)
ggplot(data = skills_and_salary, mapping = aes(y = minSal, x = n)) +
geom_point(colour = "dark green", size = 3) +
xlim(5,13) +
labs(y = "Salary", x = "Number of Skills in Posting", title = "A Broader Skillset May Not Increase Your Salary") +
theme_economist()
exp_and_salary <- Listings %>%
rename("listing" = list_id) %>%
filter(minYears > 0, minSal > 0) %>%
left_join(posting_counts, by = "listing")
ggplot(data = exp_and_salary, mapping = aes(x = minYears, y = minSal)) +
geom_point(colour = "dark green", size = 3) +
xlim(0,10) +
labs(x = "Years of Experience Sought", y = "Salary", title = "Greater Experience May Not Increase Your Salary", subtitle = "But 3 to 5 years is commonly sought") +
theme_economist()
ggplot(data = top20_skill_counts, mapping = aes(fct_rev(reorder(meaning, -n, sum)), n/192)) + #192 = total number of listings in our sample
geom_col(fill = "dark green", colour = "white") +
labs(x = "", y = "Fraction of Listings", title = "Some DS Skills are More Frequently Sought Than Others", subtitle = "Machine Learning, Python dominate") +
theme_economist(horizontal = FALSE) +
coord_flip()
ggplot(data = top20_skill_counts, mapping = aes(fct_rev(reorder(meaning, -n, sum)), n/192)) + #192 = total number of listings in our sample
geom_col(fill = "dark green", colour = "white") +
labs(x = "", y = "Fraction of Listings", title = "Some DS Skills are More Frequently Sought Than Others", subtitle = "Machine Learning, Python dominate") +
theme_economist(vertical = TRUE) +
coord_flip()
ggplot(data = top20_skill_counts, mapping = aes(fct_rev(reorder(meaning, -n, sum)), n/192)) + #192 = total number of listings in our sample
geom_col(fill = "dark green", colour = "white") +
labs(x = "", y = "Fraction of Listings", title = "Some DS Skills are More Frequently Sought Than Others", subtitle = "Machine Learning, Python dominate") +
theme_economist(horizontal = FALSE) +
coord_flip()
